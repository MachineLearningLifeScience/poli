[tox]
env_list =
    lint
    poli-base-py39
    poli-chem-py39
minversion = 4.10.0

[testenv]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
allowlist_externals =
    sh
deps =
    pytest>=6
commands =
    sh -c "mv ~/.poli_objectives ~/.poli_objectives_temp 2> /dev/null"
    pytest {tty:--color=yes} -s {posargs}
    sh -c "rm -rf ~/.poli_objectives"
    sh -c "mv ~/.poli_objectives_temp ~/.poli_objectives 2> /dev/null"

[testenv:lint]
description = check the code style with black
deps =
    black
commands =
    black --check --diff {posargs:.}

[testenv:poli-base-py39]
description = run the tests with pytest on the base environment for poli
basepython = python3.9
wheel_build_env = .pkg
deps=
    {[testenv]deps}
    numpy
    -e.
commands=
    {[testenv]commands}

[testenv:poli-chem-py39]
description = run the tests with pytest on the chem environment for poli
basepython = python3.9
wheel_build_env = .pkg
deps=
    {[testenv]deps}
    numpy
    rdkit
    selfies
    -e.
commands=
    {[testenv]commands}


